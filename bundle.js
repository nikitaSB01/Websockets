!function(){var e={25:function(){const e=new WebSocket("ws://localhost:3000");e.onopen=()=>{console.log("==>Connected to WebSocket server")},e.onclose=()=>{console.log("==>Disconnected from WebSocket server")},e.onmessage=e=>{const n=JSON.parse(e.data);console.log("==>Received:",n)},document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("nickname-modal"),n=document.getElementById("nickname-input");document.getElementById("nickname-submit").addEventListener("click",(()=>{const t=n.value.trim();t?async function(n){try{const t=await fetch("http://localhost:3000/new-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n})}),o=await t.json();"ok"===o.status?(console.log("==>Никнейм принят:",o.user.name),e.style.display="none",function(e){const n=document.getElementById("chat-container"),t=document.getElementById("message-input"),o=document.getElementById("send-message"),s=document.getElementById("messages"),a=document.getElementById("users");n.style.display="flex";const c=new WebSocket("ws://localhost:3000");function r(){const n=t.value.trim();if(n){const o={type:"send",message:n,user:{name:e},timestamp:(new Date).toISOString()};c.send(JSON.stringify(o)),i({...o,user:{name:"You"}}),t.value=""}}function i(e){const n=document.createElement("div");n.className="You"===e.user.name?"my-message":"other-message";const t=document.createElement("div");t.className="message-meta";const o=new Date(e.timestamp||Date.now()),a=o.toLocaleDateString(),c=o.toLocaleTimeString();t.innerHTML=`<strong>${e.user.name}:</strong> <span class="timestamp">${a} ${c}</span>`;const r=document.createElement("div");r.className="message-text",r.textContent=e.message,n.appendChild(t),n.appendChild(r),s.appendChild(n),s.scrollTop=s.scrollHeight}function d(n){a.innerHTML="",n.forEach((n=>{const t=document.createElement("li");t.textContent=n.name===e?"You":n.name,n.name===e&&t.classList.add("current-user"),a.appendChild(t)}))}c.onopen=()=>{console.log("Connected to WebSocket server"),c.send(JSON.stringify({type:"join",user:{name:e}}))},c.onmessage=n=>{const t=JSON.parse(n.data);if(Array.isArray(t)){d(t.filter((e=>""!==e.name)))}else"send"===t.type&&t.user.name!==e&&i(t)},t.addEventListener("keydown",(e=>{"Enter"===e.key&&(e.preventDefault(),r())})),o.addEventListener("click",r),window.addEventListener("beforeunload",(()=>{c.send(JSON.stringify({type:"exit",user:{name:e}})),c.close()}))}(n)):alert(o.message)}catch(e){console.error("Ошибка при проверке никнейма:",e)}}(t):alert("Пожалуйста, введите псевдоним.")}))}))}},n={};function t(o){var s=n[o];if(void 0!==s)return s.exports;var a=n[o]={exports:{}};return e[o](a,a.exports,t),a.exports}t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,{a:n}),n},t.d=function(e,n){for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},function(){"use strict";t(25)}()}();
//# sourceMappingURL=bundle.js.map